"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[224],{1224:function(e,t,r){r.r(t);var s=r(5893),a=r(7294),o=r(5236);t.default=e=>{let{latitude:t,longitude:n,digipin:l="",onLocationSelect:i,interactive:c=!1}=e,d=(0,a.useRef)(null),m=(0,a.useRef)(null),x=(0,a.useRef)(null),[u,h]=(0,a.useState)(!1),[g,p]=(0,a.useState)(""),[v,f]=(0,a.useState)([]),[w,b]=(0,a.useState)(!1),[y,j]=(0,a.useState)(!1),[k,N]=(0,a.useState)(!1),[L,C]=(0,a.useState)(""),[M,I]=(0,a.useState)(!1),[z,T]=(0,a.useState)(!1),[F,B]=(0,a.useState)(""),[S,E]=(0,a.useState)(""),[H,P]=(0,a.useState)(""),_=async e=>{if(!e.trim()||e.length<3){f([]);return}b(!0);try{let t=await fetch("https://api.olamaps.io/places/v1/autocomplete?input=".concat(encodeURIComponent(e),"&api_key=").concat("zFFH4Oksmh7xcmQ5MBcawBO1DLERksSMmkqiZICy")),r=await t.json();"ok"===r.status&&r.predictions&&r.predictions.length>0?(f(r.predictions),j(!0)):f([])}catch(e){console.error("Error fetching place suggestions:",e),f([])}finally{b(!1)}},D=async e=>{j(!1),f([]);try{var t,r,s,a;if(null===(t=e.geometry)||void 0===t?void 0:t.location){let{lat:t,lng:r}=e.geometry.location;R(t,r),p(e.description||"");return}let o=await fetch("https://api.olamaps.io/places/v1/details?place_id=".concat(encodeURIComponent(e.place_id),"&api_key=").concat("zFFH4Oksmh7xcmQ5MBcawBO1DLERksSMmkqiZICy")),n=await o.json();if("ok"===n.status&&(null===(s=n.result)||void 0===s?void 0:null===(r=s.geometry)||void 0===r?void 0:r.location)){let{lat:t,lng:r}=n.result.geometry.location;R(t,r),p(e.description||(null===(a=e.structured_formatting)||void 0===a?void 0:a.main_text)||"")}}catch(e){console.error("Error fetching place details:",e)}},G=(e,t)=>e>=-90&&e<=90&&t>=-180&&t<=180,R=(e,t)=>{if(!G(e,t)){C("Invalid coordinates: Latitude must be between -90 and 90, Longitude must be between -180 and 180. Got (".concat(e,", ").concat(t,")")),I(!0),setTimeout(()=>I(!1),5e3);return}m.current&&x.current&&(x.current.setLngLat([t,e]),m.current.flyTo({center:[t,e],essential:!0,zoom:16}),i&&i(e,t))},O=(e,t)=>{"DIGIPIN"===t?navigator.clipboard.writeText(W(e)):navigator.clipboard.writeText(e),B(t),T(!0),setTimeout(()=>T(!1),2e3)};(0,a.useEffect)(()=>{let e=setTimeout(()=>{_(g)},300);return()=>clearTimeout(e)},[g]),(0,a.useEffect)(()=>{if(!d.current||m.current)return;let e=G(t,n)?t:20.5937,s=G(t,n)?n:78.9629;return G(t,n)||setTimeout(()=>{C("Invalid coordinates provided: (".concat(t,", ").concat(n,"). Using default coordinates for India.")),I(!0),setTimeout(()=>I(!1),5e3)},1e3),Promise.all([r.e(834),r.e(454)]).then(r.bind(r,5182)).then(r=>{let{OlaMaps:a}=r,o=new a({apiKey:"zFFH4Oksmh7xcmQ5MBcawBO1DLERksSMmkqiZICy"}),l=o.init({style:"https://api.olamaps.io/tiles/vector/v1/styles/default-light-standard/style.json",container:d.current,center:[s,e],zoom:15,attributionControl:!1});m.current=l,l.on("load",()=>{let e=document.createElement("div");e.className="ola-marker",e.innerHTML='\n          <svg xmlns="http://www.w3.org/2000/svg" width="35" height="45" viewBox="0 0 384 512">\n            <path fill="#F97316" d="M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"/>\n          </svg>\n        ',x.current&&x.current.remove();let r=o.addMarker({element:e,draggable:c}).setLngLat([n,t]).addTo(l);x.current=r;let s=o.addPopup({offset:[0,-15]}).setHTML('\n          <div class="p-2">\n            <p class="text-sm font-bold">Location</p>\n            <p class="text-xs">'.concat(t.toFixed(6),", ").concat(n.toFixed(6),"</p>\n          </div>\n        "));r.setPopup(s),c&&i&&(l.on("click",e=>{let{lng:t,lat:a}=e.lngLat;r.setLngLat([t,a]),i(a,t),s.setHTML('\n              <div class="p-2">\n                <p class="text-sm font-bold">Location</p>\n                <p class="text-xs">'.concat(a.toFixed(6),", ").concat(t.toFixed(6),"</p>\n              </div>\n            "))}),r.on("dragend",e=>{let t=e.target.getLngLat();i(t.lat,t.lng),s.setHTML('\n              <div class="p-2">\n                <p class="text-sm font-bold">Location</p>\n                <p class="text-xs">'.concat(t.lat.toFixed(6),", ").concat(t.lng.toFixed(6),"</p>\n              </div>\n            "))})),h(!0)}),l.on("error",e=>{var t;let r=(null===(t=e.error)||void 0===t?void 0:t.message)||e.message||"";["3d_model","vectordata","Expected value to be of type number, but found null instead"].some(e=>r.includes(e))||console.error("Ola Maps error:",e)}),l.on("styleimagemissing",e=>{})}).catch(e=>{console.error("Failed to load Ola Maps SDK:",e)}),()=>{if(x.current){try{x.current.remove()}catch(e){console.error("Error removing marker:",e)}x.current=null}if(m.current){try{m.current.remove()}catch(e){console.error("Error removing map:",e)}m.current=null}}},[]),(0,a.useEffect)(()=>{if(u&&x.current&&m.current){if(!G(t,n)){C("Invalid coordinates: Latitude must be between -90 and 90, Longitude must be between -180 and 180. Got (".concat(t,", ").concat(n,")")),I(!0),setTimeout(()=>I(!1),5e3);return}if(x.current.setLngLat([n,t]),m.current.flyTo({center:[n,t],essential:!0,duration:1e3}),x.current.getPopup){let e=x.current.getPopup();e&&e.setHTML('\n            <div class="p-2">\n              <p class="text-sm font-bold">Location</p>\n              <p class="text-xs">'.concat(t.toFixed(6),", ").concat(n.toFixed(6),"</p>\n            </div>\n          "))}}},[t,n,u]),(0,a.useEffect)(()=>{let e=document.createElement("style");return e.textContent="\n      .ola-ctrl-attrib, \n      .olam-attribution,\n      .maplibregl-ctrl-attrib,\n      .mapboxgl-ctrl-attrib {\n        display: none !important;\n      }\n    ",document.head.appendChild(e),()=>{document.head.removeChild(e)}},[]);let W=e=>{if(!e)return e;let t=e.replace(/[^a-zA-Z0-9]/g,"").toUpperCase();return 10!==t.length?e:"".concat(t.substring(0,3),"-").concat(t.substring(3,6),"-").concat(t.substring(6,10))};return(0,s.jsxs)("div",{className:"relative w-full h-full",children:[(0,s.jsx)("div",{className:"absolute top-4 left-0 right-0 z-10 mx-auto px-4 max-w-md",children:(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsxs)("div",{className:"flex items-center relative",children:[(0,s.jsx)("input",{type:"text",value:g,onChange:e=>p(e.target.value),placeholder:"Search for a location...",className:"w-full pl-10 pr-10 py-2 rounded-lg border border-gray-300 shadow-md focus:outline-none focus:ring-2 focus:ring-orange-500"}),(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),w&&(0,s.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:(0,s.jsxs)("svg",{className:"animate-spin h-5 w-5 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),!w&&g&&(0,s.jsx)("button",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>{p(""),f([]),j(!1)},children:(0,s.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),y&&v.length>0&&(0,s.jsx)("div",{className:"absolute mt-1 w-full bg-white rounded-lg shadow-lg border border-gray-200 max-h-60 overflow-y-auto z-50",children:v.map((e,t)=>{var r,a,o,n;return(0,s.jsxs)("div",{className:"px-4 py-2 hover:bg-gray-100 cursor-pointer border-b border-gray-100 last:border-b-0",onClick:()=>D(e),children:[(0,s.jsx)("div",{className:"font-medium",children:(null===(r=e.structured_formatting)||void 0===r?void 0:r.main_text)||(null===(a=e.description)||void 0===a?void 0:a.split(",")[0])}),(0,s.jsx)("div",{className:"text-sm text-gray-500",children:(null===(o=e.structured_formatting)||void 0===o?void 0:o.secondary_text)||(null===(n=e.description)||void 0===n?void 0:n.split(",").slice(1).join(","))})]},e.place_id||t)})})]})}),(0,s.jsxs)("div",{className:"absolute bottom-4 right-4 z-10 flex flex-col space-y-1.5 max-w-xs sm:max-w-xs w-auto",children:[(0,s.jsxs)("div",{className:"hidden md:block bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-100 dark:border-gray-700 w-72",children:[(0,s.jsx)("div",{className:"bg-orange-500 py-2 px-4 flex justify-between items-center",children:(0,s.jsx)("h3",{className:"text-white text-sm font-medium",children:"Decode DIGIPIN"})}),(0,s.jsxs)("div",{className:"p-3 space-y-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-xs font-medium text-gray-700 dark:text-gray-300 mb-1",children:"DIGIPIN Code"}),(0,s.jsxs)("div",{className:"flex",children:[(0,s.jsx)("input",{type:"text",value:S,onChange:e=>E(e.target.value),className:"flex-grow px-2 py-1 text-sm bg-gray-50 dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-l-md focus:outline-none focus:ring-1 focus:ring-orange-500 font-mono",placeholder:"e.g., 3PT-M77-3334"}),(0,s.jsx)("button",{onClick:()=>{if(P(""),!S.trim()){P("Please enter a DIGIPIN code");return}let e=S.replace(/[^a-zA-Z0-9]/g,"").toUpperCase(),t=["2","3","4","5","6","7","8","9","C","F","J","K","L","M","P","T"],r=10===e.length&&Array.from(e).every(e=>t.includes(e));if(!r){P("Invalid DIGIPIN format");return}let s=(0,o.o)(e);if(s&&!s.includes("Invalid")){let[e,t]=s.split(",").map(e=>parseFloat(e.trim()));R(e,t),E("")}else P(s||"Failed to decode DIGIPIN")},className:"px-3 py-1 bg-orange-500 text-white text-sm rounded-r-md hover:bg-orange-600 transition-colors",children:"Go"})]}),(0,s.jsx)("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:"Format: XXX-YYY-ZZZZ"})]}),H&&(0,s.jsx)("div",{className:"p-2 bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded-md text-red-600 dark:text-red-400 text-xs",children:H})]})]}),(0,s.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-lg overflow-hidden border border-gray-100 dark:border-gray-700 w-auto sm:w-72",children:[(0,s.jsx)("div",{className:"bg-orange-500 py-1.5 px-3",children:(0,s.jsx)("h3",{className:"text-white text-xs sm:text-sm font-medium",children:"Location Details"})}),(0,s.jsxs)("div",{className:"p-2 space-y-1.5",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded-full bg-orange-100 flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 text-orange-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})}),(0,s.jsx)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:"Latitude"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-mono text-xs text-orange-500 font-medium",children:t.toFixed(6)}),(0,s.jsx)("button",{onClick:()=>O(t.toString(),"Latitude"),className:"ml-1 text-gray-400 hover:text-orange-500",title:"Copy latitude",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded-full bg-orange-100 flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 text-orange-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})})}),(0,s.jsx)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:"Longitude"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-mono text-xs text-orange-500 font-medium",children:n.toFixed(6)}),(0,s.jsx)("button",{onClick:()=>O(n.toString(),"Longitude"),className:"ml-1 text-gray-400 hover:text-orange-500",title:"Copy longitude",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]}),l&&(0,s.jsxs)("div",{className:"flex items-center justify-between pt-1 mt-1 border-t border-gray-100 dark:border-gray-700",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,s.jsx)("div",{className:"w-6 h-6 rounded-full bg-orange-100 flex items-center justify-center",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5 text-orange-500",viewBox:"0 0 20 20",fill:"currentColor",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})})}),(0,s.jsx)("span",{className:"text-xs font-medium text-gray-600 dark:text-gray-300",children:"DIGIPIN"})]}),(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)("span",{className:"font-mono text-xs text-orange-500 font-bold",children:W(l)}),(0,s.jsx)("button",{onClick:()=>O(W(l),"DIGIPIN"),className:"ml-1 text-gray-400 hover:text-orange-500",title:"Copy DIGIPIN",children:(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 5H6a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2v-1M8 5a2 2 0 002 2h2a2 2 0 002-2M8 5a2 2 0 012-2h2a2 2 0 012 2m0 0h2a2 2 0 012 2v3m2 4H10m0 0l3-3m-3 3l3 3"})})})]})]})]})]}),(0,s.jsxs)("div",{className:"flex space-x-1.5",children:[(0,s.jsxs)("button",{onClick:()=>{if(!navigator.geolocation){C("Geolocation is not supported by your browser"),I(!0),setTimeout(()=>I(!1),3e3);return}N(!0),C(""),navigator.geolocation.getCurrentPosition(e=>{let{latitude:t,longitude:r}=e.coords;R(t,r),N(!1)},e=>{N(!1);let t="Failed to get your location";switch(e.code){case e.PERMISSION_DENIED:t="Location permission denied";break;case e.POSITION_UNAVAILABLE:t="Location information unavailable";break;case e.TIMEOUT:t="Location request timed out"}C(t),I(!0),setTimeout(()=>I(!1),3e3)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})},disabled:k,className:"flex-1 py-1.5 px-2 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors text-xs sm:text-sm font-medium flex items-center justify-center",title:"Detect my location",children:[k?(0,s.jsxs)("svg",{className:"animate-spin h-3 w-3 mr-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,s.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,s.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):(0,s.jsxs)("svg",{className:"h-3 w-3 mr-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),(0,s.jsx)("span",{children:"My Location"})]}),(0,s.jsxs)("button",{onClick:()=>{let e="https://www.google.com/maps/search/?api=1&query=".concat(t,",").concat(n);window.open(e,"_blank")},className:"flex-1 py-1.5 px-2 bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-white rounded-lg hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-xs sm:text-sm font-medium flex items-center justify-center",title:"Open in Google Maps",children:[(0,s.jsx)("svg",{className:"h-3 w-3 mr-1",viewBox:"0 0 24 24",fill:"currentColor",children:(0,s.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})}),(0,s.jsx)("span",{children:"Google Maps"})]})]})]}),z&&(0,s.jsxs)("div",{className:"absolute bottom-20 right-4 z-20 bg-green-500 text-white px-3 py-1.5 rounded-lg shadow-lg text-xs flex items-center animate-fade-in-out",children:[(0,s.jsx)("svg",{className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),F," copied to clipboard!"]}),M&&(0,s.jsxs)("div",{className:"absolute bottom-20 right-4 z-20 bg-red-500 text-white px-3 py-1.5 rounded-lg shadow-lg text-xs flex items-center animate-fade-in-out",children:[(0,s.jsx)("svg",{className:"h-4 w-4 mr-1.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),L]}),(0,s.jsx)("div",{ref:d,className:"w-full h-full",style:{minHeight:"500px"}})]})}}}]);